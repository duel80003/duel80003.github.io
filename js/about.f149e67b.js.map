{"version":3,"sources":["webpack:///./src/views/Search.vue?be80","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?536d","webpack:///./src/views/Search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","scopedSlots","_u","key","fn","text","on","clean","proxy","search","model","value","callback","$$v","expression","onLoad","setSelectedRestaurant","_e","directives","name","rawName","_v","isSelectedRestaurant","placeId","staticRenderFns","component"],"mappings":"gHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,KAAK,CAACF,EAAG,MAAM,CAACG,YAAY,iCAAiC,CAACH,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,UAAU,CAACG,YAAY,UAAUD,MAAM,CAAC,MAAQ,GAAG,SAAW,GAAG,YAAc,QAAQE,YAAYR,EAAIS,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAAe,KAAbX,EAAIY,KAAaR,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,YAAYF,EAAG,SAAS,CAACG,YAAY,iBAAiBD,MAAM,CAAC,KAAO,SAASO,GAAG,CAAC,MAAQb,EAAIc,WAAWC,OAAM,GAAM,CAACL,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACP,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,GAAG,KAAO,OAAO,MAAQ,WAAWO,GAAG,CAAC,MAAQb,EAAIgB,YAAYD,OAAM,KAAQE,MAAM,CAACC,MAAOlB,EAAQ,KAAEmB,SAAS,SAAUC,GAAMpB,EAAIY,KAAKQ,GAAKC,WAAW,WAAW,KAAMrB,EAAY,SAAEI,EAAG,oBAAoB,CAACS,GAAG,CAAC,eAAiBb,EAAIsB,OAAO,mBAAqBtB,EAAIuB,yBAAyBvB,EAAIwB,KAAKpB,EAAG,MAAM,CAACqB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAST,MAAOlB,EAAY,SAAEqB,WAAW,aAAad,YAAY,+BAA+B,CAACP,EAAI4B,GAAG,kBAAkBxB,EAAG,WAAW,CAACE,MAAM,CAAC,aAAa,IAAIW,MAAM,CAACC,MAAOlB,EAAwB,qBAAEmB,SAAS,SAAUC,GAAMpB,EAAI6B,qBAAqBT,GAAKC,WAAW,yBAAyB,CAACjB,EAAG,aAAa,CAACE,MAAM,CAAC,WAAWN,EAAI8B,YAAY,IAAI,IACjxCC,EAAkB,G,swBCmCtB,OACA,cACA,uDACA,QAHA,WAIA,8CACA,+CAEA,KAPA,WAQA,OACA,QACA,aACA,wBACA,aACA,YACA,cAGA,SACA,sBADA,SACA,GACA,eACA,8BAEA,MALA,WAMA,aACA,iBACA,gCACA,kBAEA,OAXA,WAWA,WACA,mBACA,eAEA,OACA,QACA,kBACA,WACA,kBAGA,kBACA,kBACA,eACA,aACA,eAEA,aACA,eACA,cACA,eAEA,GACA,SACA,YACA,aAEA,yCAGA,OAzCA,SAyCA,cACA,0BACA,yBACA,yCAEA,4BACA,kBACA,EACA,KACA,MACA,WACA,kFAEA,OAGA,0CAKA,cACA,wDCpHgV,I,YCO5UC,EAAY,eACd,EACAjC,EACAgC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/about.f149e67b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{attrs:{\"padding\":\"\"}},[_c('div',{staticClass:\"full-width row justify-around\"},[_c('div',{staticClass:\"col-12\"},[_c('q-input',{staticClass:\"q-ml-md\",attrs:{\"dense\":\"\",\"outlined\":\"\",\"placeholder\":\"搜尋地點\"},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [(_vm.text === '')?_c('q-icon',{attrs:{\"name\":\"search\"}}):_c('q-icon',{staticClass:\"cursor-pointer\",attrs:{\"name\":\"clear\"},on:{\"click\":_vm.clean}})]},proxy:true},{key:\"after\",fn:function(){return [_c('q-btn',{attrs:{\"round\":\"\",\"dense\":\"\",\"flat\":\"\",\"icon\":\"send\",\"color\":\"primary\"},on:{\"click\":_vm.search}})]},proxy:true}]),model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1)]),(_vm.showList)?_c('infinite-scroller',{on:{\"processingLoad\":_vm.onLoad,\"selectedReataurant\":_vm.setSelectedRestaurant}}):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noReuslt),expression:\"noReuslt\"}],staticClass:\"text-h6 text-center q-pt-md\"},[_vm._v(\" No result. \")]),_c('q-dialog',{attrs:{\"full-width\":\"\"},model:{value:(_vm.isSelectedRestaurant),callback:function ($$v) {_vm.isSelectedRestaurant=$$v},expression:\"isSelectedRestaurant\"}},[_c('restaurant',{attrs:{\"place-id\":_vm.placeId}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<q-page padding>\n\t\t<div class=\"full-width row justify-around\">\n\t\t\t<div class=\"col-12\">\n\t\t\t\t<q-input dense outlined v-model=\"text\" class=\"q-ml-md\" placeholder=\"搜尋地點\">\n\t\t\t\t\t<template v-slot:append>\n\t\t\t\t\t\t<q-icon v-if=\"text === ''\" name=\"search\"></q-icon>\n\t\t\t\t\t\t<q-icon v-else name=\"clear\" class=\"cursor-pointer\" @click=\"clean\"></q-icon>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-slot:after>\n\t\t\t\t\t\t<q-btn @click=\"search\" round dense flat icon=\"send\" color=\"primary\"></q-btn>\n\t\t\t\t\t</template>\n\t\t\t\t</q-input>\n\t\t\t</div>\n\t\t</div>\n\t\t<infinite-scroller\n\t\t\tv-if=\"showList\"\n\t\t\t@processingLoad=\"onLoad\"\n\t\t\t@selectedReataurant=\"setSelectedRestaurant\"\n\t\t/>\n\t\t<div v-show=\"noReuslt\" class=\"text-h6 text-center q-pt-md\">\n\t\t\tNo result.\n\t\t</div>\n\t\t<q-dialog v-model=\"isSelectedRestaurant\" full-width>\n\t\t\t<restaurant :place-id='placeId'></restaurant>\n\t\t</q-dialog>\n\t</q-page>\n</template>\n\n<script>\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { timer } from 'rxjs';\nimport { mapGetters } from 'vuex';\nimport InfiniteScroller from '@/components/InfiniteScroller.vue';\nimport Restaurant from '@/components/Restaurant.vue';\n\nexport default {\n\tname: 'Search',\n\tcomponents: { InfiniteScroller, Restaurant },\n\tmounted() {\n\t\tthis.$store.commit('setCurrentPath', 'search');\n\t\tthis.$store.commit('setParentPath', '/search');\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttext: '',\n\t\t\tisLoading: false,\n\t\t\tisSelectedRestaurant: false,\n\t\t\tplaceId: null,\n\t\t\tnoReuslt: false,\n\t\t\tshowList: false,\n\t\t};\n\t},\n\tmethods: {\n\t\tsetSelectedRestaurant(placeId) {\n\t\t\tthis.placeId = placeId;\n\t\t\tthis.isSelectedRestaurant = true;\n\t\t},\n\t\tclean() {\n\t\t\tthis.text = '';\n\t\t\tthis.noReuslt = false;\n\t\t\tthis.$store.commit('cleanList');\n\t\t\tthis.showList = false;\n\t\t},\n\t\tsearch() {\n\t\t\tconst searchText = this.text.trim();\n\t\t\tif (searchText.length > 0) {\n\t\t\t\tconsole.log('search');\n\t\t\t\tconst params = {\n\t\t\t\t\tquery: searchText,\n\t\t\t\t\ttype: 'restaurant',\n\t\t\t\t\tradius: 500,\n\t\t\t\t\tlanguage: 'zh-TW',\n\t\t\t\t};\n\t\t\t\tconsole.log(params);\n\t\t\t\tthis.isLoading = true;\n\t\t\t\tconst onSuccess = (isEmpty) => {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.noReuslt = isEmpty;\n\t\t\t\t\tthis.showList = true;\n\t\t\t\t};\n\t\t\t\tconst onFailure = () => {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.noReuslt = false;\n\t\t\t\t\tthis.showList = false;\n\t\t\t\t};\n\t\t\t\tconst payload = {\n\t\t\t\t\tparams,\n\t\t\t\t\tonSuccess,\n\t\t\t\t\tonFailure,\n\t\t\t\t};\n\t\t\t\tthis.$store.dispatch('searchByText', payload);\n\t\t\t}\n\t\t},\n\t\tonLoad(done) {\n\t\t\tconst timer$ = timer(100, 500);\n\t\t\tconst stop$ = timer$.pipe(filter(\n\t\t\t\t() => { return this.getNextPageToken; },\n\t\t\t));\n\t\t\tconst result$ = timer$.pipe(takeUntil(stop$));\n\t\t\tthis.$subscribeTo(\n\t\t\t\tresult$,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\t() => {\n\t\t\t\t\tconst onSuccess = (hasNext = true) => {\n\t\t\t\t\t\tconsole.log('has next', hasNext);\n\t\t\t\t\t\tdone(!hasNext);\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log('fetch next');\n\t\t\t\t\tthis.$store.dispatch('fetchNextPage', onSuccess);\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters(['getNextPageToken', 'getRestaurants']),\n\t},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=5cb541d2&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}